{"ast":null,"code":"var _jsxFileName = \"/home/tori/THE_GARAGE_SALE/src/Components/Profile.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useOutletContext, useParams, useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProfilePage = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [personalPost, setPersonalPost] = useState([]);\n  const [peoplePost, setPeoplePost] = useOutletContext();\n  const navigate = useNavigate();\n  const [filteredArray, setFilteredArray] = useState([]);\n  useEffect(() => {\n    if (personalPost.length) {\n      const newArray = personalPost.filter(post => {\n        return post.active;\n      });\n      setFilteredArray(newArray);\n    }\n  }, [personalPost]);\n  useEffect(() => {\n    async function profileData(event) {\n      try {\n        const response = await fetch(\"https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/users/me\", {\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        });\n        const data = await response.json();\n        console.log(\"this is the profile data: \", data.data);\n        setMessages(data.data.messages);\n        setPersonalPost(data.data.posts);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n    profileData();\n  }, []);\n  async function deleteButton(id) {\n    console.log(id);\n    try {\n      const response = await fetch(`https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/posts/${id}`, {\n        method: \"DELETE\",\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n        }\n      });\n      const data = await response.json();\n      console.log(data);\n      setPeoplePost(peoplePost.filter(post => {\n        return post._id != id;\n      }));\n      setPersonalPost(personalPost.filter(post => {\n        return post._id != id;\n      }));\n      navigate(\"/profile\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Profile\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"profile-container\",\n      children: [messages.length ? messages.map((message, idx) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"my-message-container\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Message: \", message.content]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this)\n        }, idx, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 28\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"There are no messages!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 22\n      }, this), \",\", filteredArray.length ? filteredArray.map((post, idx) => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"my-post-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Your Post: \", post.title]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.preventDefault();\n              deleteButton(post._id);\n            },\n            id: \"delete-button\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/editpost/${post._id}`,\n            children: \"Edit Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this)]\n        }, idx, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 28\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"There are no posts!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 22\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/createpost\",\n      id: \"create-new-post-link\",\n      children: \"Create New Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 9\n  }, this);\n};\n_s(ProfilePage, \"9HUy0PRmzF58hxYAtnW6Db4Bjus=\", false, function () {\n  return [useOutletContext, useNavigate];\n});\n_c = ProfilePage;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","useOutletContext","useParams","useNavigate","Link","ProfilePage","messages","setMessages","personalPost","setPersonalPost","peoplePost","setPeoplePost","navigate","filteredArray","setFilteredArray","length","newArray","filter","post","active","profileData","event","response","fetch","headers","localStorage","getItem","data","json","console","log","posts","error","deleteButton","id","method","_id","map","message","idx","content","title","e","preventDefault"],"sources":["/home/tori/THE_GARAGE_SALE/src/Components/Profile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useOutletContext, useParams, useNavigate } from \"react-router-dom\"\nimport { Link } from \"react-router-dom\"\n\nconst ProfilePage = () => {\n    const [messages, setMessages] = useState([])\n    const [personalPost, setPersonalPost] = useState([])\n    const [peoplePost, setPeoplePost] = useOutletContext()\n    const navigate = useNavigate()\n    const [filteredArray, setFilteredArray] = useState([])\n\n    useEffect(() => {\n        if (personalPost.length) {\n\n        \n        const newArray = personalPost.filter((post) => {\n            return post.active\n        })\n        setFilteredArray(newArray)\n    }\n    }, [personalPost])\n    \n\n\n    useEffect(() => {\n        async function profileData (event) {\n            \n            try {\n                const response = await fetch(\"https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/users/me\", {\n                    headers: {\n                        'Content-Type': 'application/json',\n                        'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n                    }\n                })\n                const data = await response.json()\n                console.log(\"this is the profile data: \", data.data)\n                setMessages(data.data.messages)\n                setPersonalPost(data.data.posts)\n            } catch (error) {\n                console.log(error)\n            }\n            \n        }\n        profileData()\n    }, [])\n    async function deleteButton(id) {\n        console.log(id)\n        try {\n            const response = await fetch(`https://strangers-things.herokuapp.com/api/2209-ftb-mt-web-ft/posts/${id}`, {\n                method: \"DELETE\",\n                headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${localStorage.getItem(\"token\")}`\n                }\n            })\n            const data = await response.json()\n            console.log(data)\n            setPeoplePost(peoplePost.filter((post) => {\n                return post._id != id \n            }))\n            setPersonalPost(personalPost.filter((post) => {\n                return post._id != id \n            }))\n            navigate(\"/profile\")\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n\n    return(\n        <div>\n            <h3>Profile</h3>\n            <div id=\"profile-container\">\n            {\n                messages.length ? messages.map((message, idx) => {\n                    return <div key={idx} id=\"my-message-container\">\n                        <p>Message: {message.content}</p>\n                        </div>\n                }) : <p>There are no messages!</p>\n                \n            },\n            {\n                filteredArray.length ? filteredArray.map((post, idx) => {\n                    \n                    return <div key={idx} id=\"my-post-container\">\n                        <p>Your Post: {post.title}</p>\n                        <button onClick={(e) => {\n                            e.preventDefault()\n                            deleteButton(post._id)}} id=\"delete-button\">Delete</button>\n                            <Link to={`/editpost/${post._id}`}>Edit Post</Link>\n                        </div>\n                }) : <p>There are no posts!</p>\n                \n            }\n            \n            </div>\n            <Link to=\"/createpost\" id=\"create-new-post-link\">Create New Post</Link>\n        \n        \n            \n        </div>\n    )\n}\n\nexport default ProfilePage"],"mappings":"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"},"metadata":{},"sourceType":"module"}